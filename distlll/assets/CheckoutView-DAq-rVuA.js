import{u as B}from"./vuex-j54FugZL.js";import{_ as Q,N as U,F as R,c as z,L as G,i as N,t as H}from"./index-BCmC1QR8.js";import{c as m,f as j,o as J,E as f,G as d,I as i,q as y,J as e,F as I,R as A,Q as l,Z as V,T as O,K,L as E,S as T}from"./@vue-CRjAt1GK.js";import"./vue-router-BY3fkmSn.js";import"./vue3-toastify-CEi4-HDi.js";import"./sweetalert2-BCK3Sqif.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const X={components:{Navbar:U,Footer:R,NavCommand:z,Loader:G},setup(){const x=B(),s=m(()=>x.getters["order/shippingInfo"]),M=m(()=>x.getters["order/paymentMethod"]),t=m(()=>x.getters["order/orderCartItems"]),F=j(1e3),D=m(()=>t.value.reduce((r,a)=>r+a.product.price*a.quantity,0)),h=m(()=>D.value+F.value),S=m(()=>x.getters["auth/isAuthenticated"]),b=m(()=>x.getters["auth/user"]),L=j("white"),q=j("white"),w=j("white");console.log(t.value);const v=m(()=>t.value.reduce((r,a)=>{const c=a.product.shop;if(c&&c.name){const o=c.name;r[o]||(r[o]=[]),r[o].push(a)}return r},{}));async function k(){const r=t.value.map(a=>{const c=parseFloat(a.product.price)*parseInt(a.quantity);return{product_id:a.product.id,price:c,quantity:parseInt(a.quantity)}});x.dispatch("loader/setLoading",!0);try{const a=new FormData;a.append("amount",h.value),a.append("payment_method",M.value),a.append("user_id",b.value.id||null);const c=await N.post("/api/payments",a),o=new FormData;o.append("totalAmount",h.value),o.append("payment_id",c.data.payment.id),o.append("user_id",b.value.id||null);const u=(await N.post("/api/orders",o)).data.data.id,n=new FormData;r.forEach((_,g)=>{n.append("items[".concat(g,"][product_id]"),_.product_id),n.append("items[".concat(g,"][price]"),_.price),n.append("items[".concat(g,"][quantity]"),_.quantity)}),n.append("city",s.value.city),n.append("neighborhood",s.value.neighborhood),n.append("phone",s.value.phone),n.append("lastName",s.value.lastName),n.append("firstName",s.value.firstName),n.append("description",s.value.description),n.append("email",s.value.email),n.append("address",s.value.address);for(let[_,g]of n.entries())console.log("".concat(_,": ").concat(g));await N.post("/api/order-items/".concat(u),n);const p=new FormData;p.append("city",s.value.city),p.append("neighborhood",s.value.neighborhood),p.append("phone",s.value.phone),p.append("lastName",s.value.lastName),p.append("firstName",s.value.firstName),p.append("description",s.value.description),p.append("email",s.value.email),p.append("address",s.value.address),p.append("order_id",u),await N.post("/api/deliveries",p),H.success()}catch(a){console.error("Failed to place order:",a)}finally{x.dispatch("loader/setLoading",!1)}}function C(r){return new Intl.NumberFormat("en-US",{style:"currency",currency:"XAF"}).format(r)}return J(async()=>{S.value&&await x.dispatch("auth/fetchUser")}),{groupedCartItems:v,shippingInfo:s,paymentMethod:M,orderCartItems:t,subtotal:D,shippingCost:F,total:h,placeOrder:k,backgroundColor1:L,backgroundColor2:q,backgroundColor3:w,formatCurrency:C}}},Z={class:"px-4"},W={class:"x:max-w-[1500px] lg:max-w-[1200px] mx-auto py-[60px] lg:py-[100px]"},Y={class:"w-full"},$={class:"bg-white mt-1 lg:mt-0 py-4 px-5 rounded-md lg:rounded-none"},ee={class:""},te=e("div",{class:"hidden lg:flex gap-x-4 text-left border-b-[1px] border-gray-300 py-5"},[e("span",{class:"block w-[40%] font-bold"},"Checkout Confirmation")],-1),se={class:"mb-1 blog"},oe={class:"py-5 px-4 md:px-6 2xl:px-20 2xl:container 2xl:mx-auto"},ae={class:"mt-1 flex flex-col xl:flex-row jusitfy-center items-stretch w-full xl:space-x-8 space-y-4 md:space-y-6 xl:space-y-0"},le={class:"w-full"},re={class:"mt-10 flex flex-col xl:flex-row jusitfy-center items-stretch w-full xl:space-x-8 space-y-4 md:space-y-6 xl:space-y-0"},ne={class:"flex flex-col justify-start items-start w-full space-y-4 md:space-y-6 mx-5 xl:space-y-8"},de={class:"justify-start items-start dark:bg-gray-800 bg-gray-50 px-4 py-2 md:py-6 md:p-6 xl:p-8 w-full"},ie=e("h3",{class:"text-lg md:text-xl dark:text-white font-semibold leading-6 xl:leading-5 text-gray-800 font-bold text-center"}," Customerâ€™s Cart",-1),ce={key:0,class:"px-3 pb-4 mt-4 md:mt-6 md:flex-row justify-start items-start md:items-center md:space-x-6 xl:space-x-8 w-full border-[1px] border-green-600"},pe=T('<div class="border-b-[1px] border-black w-full flex flex-col justify-start items-start space-y-8"><h3 class="text-xl dark:text-white xl:text-2xl font-semibold leading-6 text-gray-800 text-center pb-4" style="color:red;">Shop &amp; Item name</h3><div class="flex justify-between items-start w-full pt-2"><p class="text-base dark:text-white xl:text-lg leading-6"> Iphone</p><p class="text-base dark:text-white xl:text-lg font-semibold leading-6 text-gray-800"><span class="px-7">Quantity</span>10 </p></div></div>',1),xe=[pe],me={class:"px-3 pb-4 mt-4 md:mt-6 md:flex-row justify-start items-start md:items-center md:space-x-6 xl:space-x-8 w-full border-[1px] border-green-600"},he={class:"border-b-[1px] border-black w-full flex flex-col justify-start items-start space-y-8"},ue={class:"text-xl dark:text-white xl:text-2xl font-semibold leading-6 text-gray-800 text-center pb-4",style:{color:"red"}},_e={class:"flex justify-between items-start w-full pt-2"},ge={class:"text-base dark:text-white xl:text-lg leading-6"},fe={class:"text-base dark:text-white xl:text-lg font-semibold leading-6 text-gray-800"},ye=e("span",{class:"px-7"},"Quantity",-1),be={class:"mt-5 py-3 w-full border-[1px] border-green-600 px-4"},we=e("p",{class:"text-lg md:text-xl dark:text-white font-semibold leading-6 xl:leading-5 text-gray-800",style:{color:"red"}},"Product in Cart",-1),ve={class:"border-b-[1px] border-black w-full flex flex-col justify-start items-start space-y-8"},ke={class:"text-xl dark:text-white xl:text-2xl font-semibold leading-6 text-gray-800"},Ce={class:"flex justify-between items-start w-full pt-2"},Ne={class:"text-base dark:text-white xl:text-lg leading-6"},je={class:"px-7"},Ie={class:"text-base dark:text-white xl:text-lg font-semibold leading-6 text-gray-800"},Me={key:1,class:"border-b-[1px] border-black w-full flex flex-col justify-start items-start space-y-8"},Fe=T('<h3 class="text-xl dark:text-white xl:text-2xl font-semibold leading-6 text-gray-800"> Premium Quaility Dress</h3><div class="flex justify-between items-start w-full pt-2"><p class="text-base dark:text-white xl:text-lg leading-6"> $36.00 <span class="px-7">01</span></p><p class="text-base dark:text-white xl:text-lg font-semibold leading-6 text-gray-800"> $36.00</p></div>',2),De=[Fe],Se={class:"flex justify-center flex-col md:flex-row flex-col items-stretch w-full space-y-4 md:space-y-0 md:space-x-6 xl:space-x-8"},Le={class:"flex flex-col px-4 py-6 md:p-6 xl:p-8 w-full bg-gray-50 dark:bg-gray-800 space-y-6"},qe=e("h3",{class:"text-xl dark:text-white font-semibold leading-5 text-gray-800"}," Summary",-1),Ae={class:"flex justify-center items-center w-full space-y-4 flex-col border-gray-200 border-b pb-4"},Oe={class:"flex justify-between w-full"},Ee=e("p",{class:"text-base dark:text-white leading-4 text-gray-800"}," Subtotal",-1),Pe={class:"text-base dark:text-gray-300 leading-4 text-gray-600"},Ve={class:"flex justify-between items-center w-full"},Te=e("p",{class:"text-base dark:text-white leading-4 text-gray-800"}," Shipping",-1),Be={class:"text-base dark:text-gray-300 leading-4 text-gray-600"},Qe={class:"flex justify-between items-center w-full"},Ue=e("p",{class:"text-base dark:text-white font-semibold leading-4 text-gray-800"}," Total",-1),Re={class:"text-base dark:text-gray-300 font-semibold leading-4 text-gray-600"},ze={class:"overflow-hidden bg-gray-50 dark:bg-gray-800 w-full flex justify-between items-center md:items-start px-4 py-6 mx-5 md:p-6 xl:p-8 flex-col"},Ge=e("h3",{class:"text-xl dark:text-white font-semibold leading-5 text-gray-800",style:{color:"red"}},"Shipping Details",-1),He={class:"md:flex-row xl:flex-col justify-start items-stretch h-full w-full md:space-x-6 lg:space-x-8 xl:space-x-0"},Je={class:"grid grid-cols-1 gap-4 w-full mt-4"},Ke={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Xe={class:"w-full"},Ze=e("label",{for:"firstName"},"Nom",-1),We={for:"shippingFirstName",class:"non-editable-label border w-full border-gray-300 rounded-md p-5",style:{"background-color":"white"}},Ye={class:"w-full"},$e=e("label",{for:"lastName"},"Prenom",-1),et={for:"shippingLastName",class:"non-editable-label border w-full border-gray-300 rounded-md p-3",style:{"background-color":"white"}},tt={class:"w-full"},st=e("label",{for:"email"},"Email",-1),ot={for:"shippingEmail",class:"non-editable-label border w-full border-gray-300 rounded-md p-5",style:{"background-color":"white"}},at={class:"w-full"},lt=e("label",{for:"phoneNUmber"},"Telephone",-1),rt={for:"shippingPhoneNumber",class:"non-editable-label border w-full border-gray-300 rounded-md p-3",style:{"background-color":"white"}},nt=e("div",{class:"w-full"},[e("label",{for:"country"},"Pays"),e("label",{for:"shippingCountry",class:"non-editable-label border w-full border-gray-300 rounded-md p-5",style:{"background-color":"white"}},"Cameroon")],-1),dt={class:"w-full"},it=e("label",{for:"region"},"Ville",-1),ct={for:"shippingTown",class:"non-editable-label border w-full border-gray-300 rounded-md p-3",style:{"background-color":"white"}},pt=e("label",{for:"address"}," Adresse ",-1),xt={for:"shippingAddress",class:"non-editable-label border w-full border-gray-300 rounded-md p-3",style:{"background-color":"white"}},mt={class:"pt-3"},ht=e("label",{for:"field8"},"instruction utile",-1),ut={for:"shippingSpecialNotice",class:"non-editable-label border w-full border-gray-300 rounded-md p-3",style:{"background-color":"white"}},_t={key:0,class:"px-8 py-5 lg:max-w-md"},gt=e("input",{type:"radio",value:"orangeMoney",class:"form-radio h-15 mx-5 text-indigo-500",id:"type1"},null,-1),ft=e("h1",{class:"px-10 font-bold py-2"},"pay with Orange Money",-1),yt=e("img",{src:"https://seeklogo.com/images/O/orange-money-logo-8F2AED308D-seeklogo.com.png",class:"h-12 w-1/2"},null,-1),bt=[gt,ft,yt],wt={key:1,class:"px-8 py-4 lg:max-w-md"},vt=e("input",{type:"radio",value:"mtnMobileMoney",class:"form-radio hover:text-white h-15 w-15 mx-5 text-indigo-500",id:"type2"},null,-1),kt=e("h1",{class:"px-10 font-bold py-2"},"pay with MTN mobile Money",-1),Ct=e("img",{src:"https://www.kindpng.com/picc/m/151-1514348_mtn-momo-logo-mobile-money-logo-png-transparent.png",class:"h-12 w-fit"},null,-1),Nt=[vt,kt,Ct],jt={key:2,class:"px-8 py-4 lg:max-w-md"},It=e("label",{class:"flex items-center hover:bg-red-600 hover:text-white cursor-pointer border-2 rounded-lg border-gray-300 py-5 px-5"},[e("input",{type:"radio",value:"payOnDelivery",class:"form-radio h-15 w-15 mx-5 text-indigo-500",id:"type3"}),e("h1",{class:"px-10 font-bold py-2"},"pay on delivery"),e("img",{src:"https://static.vecteezy.com/system/resources/thumbnails/002/952/794/small/cash-on-delivery-steacker-free-vector.jpg",class:"h-12 w-fit"})],-1),Mt=[It],Ft={class:"flex justify-between items-center pt-9"},Dt={class:"text-black hidden lg:flex gap-x-2"},St=e("span",{class:"block"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-move-left"},[e("path",{d:"M6 8L2 12L6 16"}),e("path",{d:"M2 12H22"})])],-1),Lt={class:"block"};function qt(x,s,M,t,F,D){var w,v,k,C,r,a,c;const h=f("Navbar"),S=f("Loader"),b=f("NavCommand"),L=f("router-link"),q=f("Footer");return d(),i(I,null,[y(h),e("section",Z,[e("div",W,[y(S),e("div",Y,[y(b),e("div",$,[e("div",ee,[te,e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[e("div",re,[e("div",ne,[e("div",de,[ie,Object.keys(t.groupedCartItems).length===0?(d(),i("div",ce,xe)):(d(!0),i(I,{key:1},A(t.groupedCartItems,(o,P)=>(d(),i("div",me,[e("div",he,[e("h3",ue,l(P),1),(d(!0),i(I,null,A(o,u=>(d(),i("div",_e,[e("p",ge,l(u.product.name),1),e("p",fe,[ye,E(l(u.quantity),1)])]))),256))])]))),256)),e("div",be,[we,t.orderCartItems.length>0?(d(!0),i(I,{key:0},A(t.orderCartItems,o=>(d(),i("div",ve,[e("h3",ke,l(o.product.name),1),e("div",Ce,[e("p",Ne,[E(l(o.product.price)+" FRCFA ",1),e("span",je,l(o.quantity),1)]),e("p",Ie,l(o.product.price*o.quantity)+" FCFA",1)])]))),256)):(d(),i("div",Me,De))])]),e("div",Se,[e("div",Le,[qe,e("div",Ae,[e("div",Oe,[Ee,e("p",Pe,l(t.formatCurrency(t.subtotal)),1)]),e("div",Ve,[Te,e("p",Be,l(t.formatCurrency(t.shippingCost)),1)])]),e("div",Qe,[Ue,e("p",Re,l(t.formatCurrency(t.total)),1)])])])]),e("div",ze,[Ge,e("div",He,[e("div",Je,[e("div",Ke,[e("div",Xe,[Ze,e("label",We,l((w=t.shippingInfo.firstName)!=null?w:"nom"),1)]),e("div",Ye,[$e,e("label",et,l((v=t.shippingInfo.lastName)!=null?v:"prenom"),1)]),e("div",tt,[st,e("label",ot,l((k=t.shippingInfo.email)!=null?k:"email"),1)]),e("div",at,[lt,e("label",rt,l((C=t.shippingInfo.phone)!=null?C:"nom"),1)]),nt,e("div",dt,[it,e("label",ct,l((r=t.shippingInfo.city)!=null?r:"nom"),1)])]),e("div",null,[e("div",null,[pt,e("label",xt,l((a=t.shippingInfo.address)!=null?a:"Ex:Pk17,intrancegendamerie appt 789"),1)]),e("div",mt,[ht,e("label",ut,l((c=t.shippingInfo.description)!=null?c:"s'il vous plait ne pas livrer apres 20h"),1)])])])]),t.paymentMethod==="orangeMoney"?(d(),i("div",_t,[e("label",{style:V({backgroundColor:t.backgroundColor1}),onMouseover:s[0]||(s[0]=o=>t.backgroundColor1="rgba(239,128,49,255)"),onMouseout:s[1]||(s[1]=o=>t.backgroundColor1="white"),class:"flex justify-start hover:text-white items-center cursor-pointer border-2 border-gray-300 rounded-lg py-5 px-5"},bt,36)])):O("",!0),t.paymentMethod==="mtnMobileMoney"?(d(),i("div",wt,[e("label",{style:V({backgroundColor:t.backgroundColor2}),onMouseover:s[2]||(s[2]=o=>t.backgroundColor2="yellow"),onMouseout:s[3]||(s[3]=o=>t.backgroundColor2="white"),class:"flex items-center cursor-pointer hover:text-white border-2 border-gray-300 rounded-lg py-5 px-5"},Nt,36)])):O("",!0),t.paymentMethod==="payOnDelivery"?(d(),i("div",jt,Mt)):O("",!0)])])])])])]),e("div",Ft,[e("button",Dt,[St,e("span",Lt,[y(L,{to:"/payment"},{default:K(()=>[E("Return to payment")]),_:1})])]),e("button",{onClick:s[4]||(s[4]=(...o)=>t.placeOrder&&t.placeOrder(...o)),class:"bg-red-700 w-full lg:w-fit px-4 py-3 lg:py-2 rounded-md text-white font-semibold"},"Checkout")])])])])])]),y(q)],64)}const Rt=Q(X,[["render",qt]]);export{Rt as default};
