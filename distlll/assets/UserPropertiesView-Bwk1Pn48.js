import{c as M,f as u,w as T,o as B,E as h,G as a,I as n,q as f,J as e,K as E,F as P,R as L,P as S,M as y,N as U,Q as l,T as v,X as C,S as j,L as A}from"./@vue-CRjAt1GK.js";import{u as D}from"./vuex-j54FugZL.js";import{u as G}from"./vue-router-BY3fkmSn.js";import{_ as Y,d as F,L as I,T as R,i as b,t as X}from"./index-BCmC1QR8.js";import{S as q}from"./sweetalert2-BCK3Sqif.js";import{G as z}from"./GreetingUser-CGvTw3eS.js";import"./vue3-toastify-CEi4-HDi.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const J={components:{Navbar:F,Loader:I,TopNavbar:R,GreetingUser:z},setup(){G();const i=D();i.getters["getImagePaths/getPath"];const s=M(()=>i.getters["auth/user"]),m=u(""),t=u(""),g=u(""),c=u({}),p=u(null),_=u("");T(s,(r,d)=>{console.log(r),console.log(d)});const w=(r,d)=>r.length<=d?r:r.substring(0,d)+"...",k=async()=>{c.value={},i.dispatch("loader/setLoading",!0);try{console.log(s.value.id),await i.dispatch("properties/createProperty",{name:m.value,user_id:s.value.id,attribute_id:_.value}),m.value="";const r=await b.get("/api/user-properties");t.value=r.data.properties}catch(r){c.value=r}finally{i.dispatch("loader/setLoading",!1),console.log("Setting loader to false")}},o=r=>{q.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed){i.dispatch("properties/deleteProperty",r);const V=await b.get("/api/user-properties");t.value=V.data.properties}})},x=r=>{console.log(r),p.value={...r}},N=async()=>{c.value={},i.dispatch("loader/setLoading",!0);try{await i.dispatch("properties/updateProperty",{...p.value});const r=await b.get("/api/user-properties");t.value=r.data.properties,p.value=null,X.success()}catch(r){c.value=r}finally{i.dispatch("loader/setLoading",!1)}};return B(async()=>{i.dispatch("loader/setLoading",!0);try{await i.dispatch("auth/fetchUser");const r=await b.get("/api/user-properties");t.value=r.data.properties;const d=await b.get("/api/user-attributes");g.value=d.data.attributes,console.log(g.value)}catch(r){console.log(r)}finally{i.dispatch("loader/setLoading",!1)}}),{truncateText:w,authUser:s,createNewProperty:k,name:m,errors:c,properties:t,editProperty:x,updateProperty:N,editingProperty:p,attributes:g,attribute_id:_,confirmDelete:o}}},K={class:"flex relative"},O={class:"lg:flex-row w-full lg:w-[80%]"},Q={class:"w-full dash-content"},H={class:"py-5 lg:px-[25px] px-4"},W={class:"flex flex-col lg:flex-row justify-between lg:items-center"},Z={class:""},$=e("span",{class:"text-gray-600 text-base"},"Liste des propriétés de Deballage ",-1),ee=j('<div id="modal" class="absolute invisible w-full h-full top-0 left-0 bg-black bg-opacity-40 flex justify-center items-center"><div class="mb-4 flex gap-x-4 mt-7"></div><div class="bg-white rounded-lg shadow-sm w-[90%] lg:w-[40%] h-fit lg:h-[40%] px-4 py-4 lg:py-6 lg:px-6"><button id="cancelButtons" class="text-black font-bold font-bold" type="button">X</button><div class="flex justify-between"><h1 class="w-full h-full text-[24px] font-medium text-center">Do you really want to cancel this order?</h1></div><div class="mb-4 flex gap-x-4 mt-7"><button id="cancelButton" class="w-full rounded-md py-3 bg-red-600 text-black font-medium" type="button">NO</button><input class="w-full rounded-md py-3 bg-black text-white" type="submit" value="YES"></div></div></div>',1),te={class:"container mx-auto p-6 font-mono"},oe={class:"w-full"},re={class:"bg-white p-4 rounded shadow"},se={class:"table-container"},ae={class:"w-full"},ne=e("thead",null,[e("tr",{class:"text-md font-semibold tracking-wide text-left text-white bg-red-600 uppercase border-b border-gray-600"},[e("th",{class:"px-4 py-3"},"Nom "),e("th",{class:"px-4 py-3"},"Attribut "),e("th",{class:"px-4 py-3"},"Action ")])],-1),ie={class:"px-3 py-4font-semibold text-black"},le={class:"px-3 py-4font-semibold text-black"},de={class:"px-4 py-3 text-sm border"},ce=["onClick"],pe=["onClick"],ue={key:1,class:"py-3 border"},be=e("td",{class:"px-3 py-4font-semibold text-black"}," Exemple",-1),me=e("td",{class:"px-4 py-3 text-sm border"},[e("a",{id:"",href:"#",class:"inline-block px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier "),e("a",{id:"",href:"#",class:"inline-block px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"delete ")],-1),ge=[be,me],_e=e("div",{class:"flex justify-end gap-x-3 mt-7 p-fixed mb-6 z-10"},[e("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"previousPage()"},"Previous"),e("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"nextPage()"},"Next")],-1),xe={class:"max-w-screen-lg mx-auto"},he={class:"bg-white p-4 rounded shadow"},fe={key:0,class:"text-lg font-semibold mb-4"},ye={key:1,class:"text-lg font-semibold mb-4"},ve={class:"mb-4"},we=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"attributeName"}," Nom",-1),ke={key:0,class:"text-red-500 m-1"},Ne={class:"mb-4"},Pe=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"attribute_id"},"Nom de l'attribut",-1),Le=e("option",{value:""},"None",-1),Se=["value"],Ue={key:0,class:"text-red-500 m-1"},Ce=e("div",null,[e("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Soumettre")],-1),Ve={class:"mb-4"},Me=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"updateAttributeName"},"Nom",-1),Te={key:0,class:"text-red-500 m-1"},Be={class:"mb-4"},Ee=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"attribute_id"},"Nom de l'attribut",-1),je=e("option",{value:""},"None",-1),Ae=["value"],De={key:0,class:"text-red-500 m-1"},Ge=e("div",null,[e("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Modifier")],-1);function Ye(i,s,m,t,g,c){const p=h("Navbar"),_=h("TopNavbar"),w=h("Loader"),k=h("GreetingUser");return a(),n("main",K,[f(p),e("section",O,[e("div",Q,[f(_),f(w),e("div",H,[e("div",W,[e("div",Z,[f(k,null,{greeting:E(()=>[A("Bonne journée, "+l(t.authUser.firstName)+" "+l(t.authUser.lastName),1)]),_:1}),$])]),ee,e("section",te,[e("div",oe,[e("div",re,[e("div",se,[e("table",ae,[ne,e("tbody",null,[t.properties.length>0?(a(!0),n(P,{key:0},L(t.properties,o=>{var x;return a(),n("tr",{class:"py-3 border",key:o.id},[e("td",ie,l(o.name),1),e("td",le,l((x=o.attribute)==null?void 0:x.name),1),e("td",de,[e("a",{href:"#",onClick:N=>t.editProperty(o),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier ",8,ce),e("a",{href:"#",onClick:N=>t.confirmDelete(o.id),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"Supprimer ",8,pe)])])}),128)):(a(),n("tr",ue,ge))])]),_e])])])]),e("div",xe,[e("div",he,[t.editingProperty?(a(),n("h2",ye,"Mettre à jour la propriété")):(a(),n("h2",fe,"Créer une nouvelle propriété ")),t.editingProperty?(a(),n("form",{key:3,onSubmit:s[5]||(s[5]=S((...o)=>t.updateProperty&&t.updateProperty(...o),["prevent"]))},[e("div",Ve,[Me,y(e("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"updateAttributeName",type:"text",placeholder:"Enter the attribute name","onUpdate:modelValue":s[3]||(s[3]=o=>t.editingProperty.name=o)},null,512),[[U,t.editingProperty.name]]),t.errors.name?(a(),n("span",Te,l(t.errors.name[0]),1)):v("",!0)]),e("div",Be,[Ee,y(e("select",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline","onUpdate:modelValue":s[4]||(s[4]=o=>t.editingProperty.attribute_id=o),id:"attribute_id"},[je,(a(!0),n(P,null,L(t.attributes,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,Ae))),128))],512),[[C,t.editingProperty.attribute_id]]),t.errors.attribute_id?(a(),n("span",De,l(t.errors.attribute_id[0]),1)):v("",!0)]),Ge],32)):(a(),n("form",{key:2,onSubmit:s[2]||(s[2]=S((...o)=>t.createNewProperty&&t.createNewProperty(...o),["prevent"]))},[e("div",ve,[we,y(e("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"attributeName",type:"text",placeholder:"Enter the attribute name","onUpdate:modelValue":s[0]||(s[0]=o=>t.name=o)},null,512),[[U,t.name]]),t.errors.name?(a(),n("span",ke,l(t.errors.name[0]),1)):v("",!0)]),e("div",Ne,[Pe,y(e("select",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline","onUpdate:modelValue":s[1]||(s[1]=o=>t.attribute_id=o),id:"attribute_id"},[Le,(a(!0),n(P,null,L(t.attributes,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,Se))),128))],512),[[C,t.attribute_id]]),t.errors.attribute_id?(a(),n("span",Ue,l(t.errors.attribute_id[0]),1)):v("",!0)]),Ce],32))])])])])])])}const He=Y(J,[["render",Ye]]);export{He as default};
