import{_ as R,N as B,F as I,L as q,i as C,h as H}from"./index-BCmC1QR8.js";import{f as i,c as U,o as z,w as A,E as v,G as a,I as l,q as w,J as o,M as j,X as L,F as y,R as k,N as D,L as N,T as Q,S as P,Q as g,Z as G,K as J,W as K}from"./@vue-CRjAt1GK.js";import{u as W}from"./vue-router-BY3fkmSn.js";import{u as X}from"./vuex-j54FugZL.js";import{_ as Z}from"./icon-filter-UYkcP1Gu.js";import"./vue3-toastify-CEi4-HDi.js";import"./sweetalert2-BCK3Sqif.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const O={components:{Navbar:B,Footer:I,Loader:q},setup(){W();const d=X(),r=d.getters["getImagePaths/getPath"],S=i(""),t=i(""),f=i(""),x=i([]),b=i([]),_=i([]),m=i({}),h=i(1),e=i(1),u=async()=>{const s={page:e.value,search:S.value,city:t.value,neighborhood:f.value};d.dispatch("loader/setLoading",!0);try{const n=await C.get("/api/shops",{params:s});x.value=n.data.data,console.log(x.value),m.value=n.data.meta}catch(n){console.error("Error fetching shops:",n)}finally{d.dispatch("loader/setLoading",!1)}},T=async()=>{d.dispatch("loader/setLoading",!0);try{const s=await C.get("/api/cities/all");b.value=s.data.data}catch(s){console.error("Error fetching cities:",s)}finally{d.dispatch("loader/setLoading",!1)}},E=async()=>{d.dispatch("loader/setLoading",!0);try{const s=await C.get("/api/neighborhoods/all");_.value=s.data.data}catch(s){console.error("Error fetching neighborhoods:",s)}finally{d.dispatch("loader/setLoading",!1)}},V=s=>{s!==h.value&&(h.value=s,e.value=s,u())},F=(s,n)=>{const c=[];if(n<=10)for(let p=1;p<=n;p++)c.push(p);else{c.push(1),s>4&&c.push("...");for(let p=Math.max(2,s-2);p<=Math.min(n-1,s+2);p++)c.push(p);s<n-3&&c.push("..."),c.push(n)}return c},M=U(()=>F(h.value,m.value.last_page||1));return z(()=>{T(),E(),u()}),A([t,f],u),{search:S,selectedCity:t,selectedNeighborhood:f,shops:x,cities:b,neighborhoods:_,fetchShops:u,path:r,truncateText:(s,n)=>s.length<=n?s:s.substring(0,n)+"...",paginationPages:M,currentPage:h,goToPage:V,meta:m}}},Y=P('<section class="px-4 lg:px-6 xl:px-0"><div class="2xl:max-w-[1480px] xl:max-w-[1410px] mx-auto lg:px-6 2xl:px-0"><div class="badcrub py-[20px] hidden lg:block"><a class="text-gray-500 text-[13px] font-semibold" href="/index.html">Home</a> &gt; <a href="#" class="text-red-600 text-[14px] font-semibold">All Shops</a><div class="flex justify-between items-center py-3 px-4 bg-white shadow-lg rounded-md mt-4 lg:hidden"><span class="inline-block font-bold">All Products</span><button class="inline-block toggle-button"><img width="30" src="'+Z+'" alt="icon of a filter"></button></div></div></div></section>',1),$={class:"2xl:max-w-[1480px] xl:max-w-[1410px] mx-auto lg:px-6 2xl:px-0 flex pt-3 lg:pt-6 pb-10"},ee={class:"prduct-list lg:w-[100%] w-full px-4 lg:px-0"},te={class:"py-[7px] lg:block mx-5"},oe={class:"mx-auto text-center"},se={class:"lg:flex"},re={class:"search my-2 w-full lg:flex mr-2 gap-x-2"},ne=o("option",{value:""},"Ville",-1),ae=["value"],le=o("option",{value:""},"Quartier",-1),ie=["value"],de=o("span",{class:"inline-block px-3"},"RECHERCHER",-1),ce=o("img",{class:"mx-5",src:H,alt:"search an item"},null,-1),pe={class:"px-0 lg:px-4 2xl:px-4"},he={class:"2xl:max-w-[1480px] mx-auto"},me={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-5 grid-flow-row-dense lg:grid-rows-2 gap-y-4"},ue={class:"max-w-sm mx-auto bg-white rounded-lg overflow-hidden shadow-lg"},ge={class:"border-b px-4 pb-6"},fe={class:"text-center sm:text-left sm:flex mb-4"},xe=["src"],be={class:"py-2"},_e={class:"font-bold text-2xl mb-1"},ve={class:"flex"},we={class:"px-4 py-4"},ye={class:"flex items-center text-grey-darker mb-4"},ke=o("strong",{class:"text-black"},null,-1),Se={key:0,class:"pagination flex gap-x-2 justify-center lg:justify-start lg:gap-x-4 mt-5 mx-0 lg:ml-4"},Ce=["onClick"],je={key:1,class:"pagination flex gap-x-2 justify-center lg:justify-start lg:gap-x-4 mt-5 mx-0 lg:ml-4"},Ne=P('<span class="w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer">&lt; </span><span class="w-8 h-8 p-6 bg-red-700 text-white rounded-md flex items-center font-bold cursor-pointer justify-center">1</span><span class="w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer">2</span><span class="w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer">3</span><span class="w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer">4</span><span class="w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer">&gt;</span>',6),Le=[Ne];function Pe(d,r,S,t,f,x){const b=v("Navbar"),_=v("Loader"),m=v("router-link"),h=v("Footer");return a(),l("main",null,[w(b),w(_),Y,o("section",null,[o("div",$,[o("div",ee,[o("div",te,[o("div",oe,[o("div",se,[o("div",re,[j(o("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>t.selectedCity=e),onChange:r[1]||(r[1]=(...e)=>t.fetchShops&&t.fetchShops(...e)),id:"town","aria-placeholder":"Select your town",class:"border w-full my-2 border-red-600 rounded-md p-2 focus:ring-black focus:border-red-600"},[ne,(a(!0),l(y,null,k(t.cities,e=>(a(),l("option",{key:e.id,value:e.name},g(e.name),9,ae))),128))],544),[[L,t.selectedCity]]),j(o("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>t.selectedNeighborhood=e),onChange:r[3]||(r[3]=(...e)=>t.fetchShops&&t.fetchShops(...e)),id:"town","aria-placeholder":"Select your town",class:"border w-full my-2 border-red-600 rounded-md p-2 focus:ring-black focus:border-red-600"},[le,(a(!0),l(y,null,k(t.neighborhoods,e=>(a(),l("option",{key:e.id,value:e.name},g(e.name),9,ie))),128))],544),[[L,t.selectedNeighborhood]]),j(o("input",{class:"border w-full my-2 border-red-600 rounded-md p-2 focus:ring-red-600 focus:border-red-600",type:"search",placeholder:"Rechercher des boutiques sur deballage.com","onUpdate:modelValue":r[4]||(r[4]=e=>t.search=e),onInput:r[5]||(r[5]=(...e)=>t.fetchShops&&t.fetchShops(...e))},null,544),[[D,t.search]])]),o("a",{href:"#",onClick:r[6]||(r[6]=(...e)=>t.fetchShops&&t.fetchShops(...e)),class:"my-4 hover:bg-red-600 transition-all flex items-center h-[inherit] px-[15px] bg-red-700 text-white rounded-[3.56px]"},[de,N(),ce])])])]),o("div",pe,[o("div",he,[o("div",me,[t.shops.length>0?(a(!0),l(y,{key:0},k(t.shops,e=>(a(),l("div",{key:e.id,class:"p-[11.86px] rounded-md shadow-md bg-white mx-1"},[o("div",ue,[o("div",{class:"bg-cover h-40",style:G({backgroundImage:"url(".concat(t.path+e.cover,")")})},null,4),o("div",ge,[o("div",fe,[o("img",{class:"h-32 w-32 rounded-full border-4 border-white -mt-16 mr-4",src:t.path+e.profile,alt:""},null,8,xe),o("div",be,[o("h3",_e,g(e.name),1)])]),o("div",ve,[w(m,{to:"/vendor-profile/"+e.id,class:"flex-1 rounded-full border-2 border-red bg-red-600 font-semibold text-center text-black px-4 py-2"},{default:J(()=>[N(" Boutique")]),_:2},1032,["to"])])]),o("div",we,[o("div",ye,[o("span",null,[ke,N(" "+g(t.truncateText(e.description,20)),1)])])])])]))),128)):Q("",!0)])])]),t.paginationPages.length>0?(a(),l("div",Se,[o("span",{onClick:r[7]||(r[7]=e=>t.currentPage>1&&t.goToPage(t.currentPage-1)),class:"w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer"},"< "),(a(!0),l(y,null,k(t.paginationPages,e=>(a(),l("span",{key:e,onClick:u=>e!=="..."&&t.goToPage(e),class:K(["w-8 h-8 p-6 rounded-md flex items-center font-bold cursor-pointer justify-center",e===t.currentPage?"bg-red-700 text-white":"bg-white"])},g(e),11,Ce))),128)),o("span",{onClick:r[8]||(r[8]=e=>t.currentPage<t.meta.last_page&&t.goToPage(t.currentPage+1)),class:"w-8 h-8 p-6 bg-white rounded-md flex items-center justify-center font-bold cursor-pointer"},">")])):(a(),l("div",je,Le))])])]),w(h)])}const ze=R(O,[["render",Pe]]);export{ze as default};
