import{c as M,f as g,w as B,o as P,E as v,G as s,I as n,q as w,J as e,K as A,F as U,R as D,P as S,M as h,N as k,Q as l,T as p,X as L,S as G,L as Q}from"./@vue-CRjAt1GK.js";import{u as R}from"./vuex-j54FugZL.js";import{u as q}from"./vue-router-BY3fkmSn.js";import{_ as z,d as Y,L as X,T as J,i as C,t as K}from"./index-BCmC1QR8.js";import{S as O}from"./sweetalert2-BCK3Sqif.js";import{G as H}from"./GreetingUser-CGvTw3eS.js";import"./vue3-toastify-CEi4-HDi.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const W={components:{Navbar:Y,Loader:X,TopNavbar:J,GreetingUser:H},setup(){q();const i=R(),a=i.getters["getImagePaths/getPath"],_=M(()=>i.getters["auth/user"]),t=g(""),m=g([]),b=g({}),c=g(null),f=g(""),u=g(""),x=g(null),o=g("");B(_,(r,d)=>{console.log(r),console.log(d)});const N=r=>{const d=r.target.files;if(d.length>0){u.value=d[0];const y=new FileReader;y.onload=j=>{x.value=j.target.result},y.readAsDataURL(u.value)}},V=(r,d)=>r.length<=d?r:r.substring(0,d)+"...",E=async()=>{b.value={},i.dispatch("loader/setLoading",!0);try{console.log(_.value.id);const r=new FormData;r.append("name",t.value),r.append("description",f.value),r.append("image",u.value),r.append("parent_id",o.value),r.append("user_id",_.value.id),await i.dispatch("categories/createCategory",r),t.value="",f.value="",u.value=null,x.value="",o.value="";const d=await C.get("/api/user-categories");m.value=d.data.categories}catch(r){b.value=r,console.log(r)}finally{i.dispatch("loader/setLoading",!1),console.log("Setting loader to false")}},T=r=>{console.log(r),c.value={...r},x.value=a+c.value.image},F=r=>{O.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed){i.dispatch("categories/deleteCategory",r);const y=await C.get("/api/user-categories");m.value=y.data.categories}})},I=async()=>{b.value={},i.dispatch("loader/setLoading",!0);try{console.log(c.value);const r=new FormData;r.append("id",c.value.id),r.append("name",c.value.name),r.append("description",c.value.description),u.value&&r.append("image",u.value),c.value.parent_id&&r.append("parent_id",c.value.parent_id),await i.dispatch("categories/updateCategory",r);const d=await C.get("/api/user-categories");m.value=d.data.categories,c.value=null,K.success()}catch(r){b.value=r}finally{i.dispatch("loader/setLoading",!1)}};return P(async()=>{i.dispatch("loader/setLoading",!0);try{await i.dispatch("auth/fetchUser");const r=await C.get("/api/user-categories");m.value=r.data.categories,console.log(m.value)}catch(r){console.log(r)}finally{i.dispatch("loader/setLoading",!1)}}),{truncateText:V,authUser:_,createNewCategory:E,name:t,imageUrl:x,errors:b,categories:m,editCategory:T,updateCategory:I,editingCategory:c,onFileChange:N,parent_id:o,description:f,path:a,confirmDelete:F}}},Z={class:"flex relative"},$={class:"lg:flex-row w-full lg:w-[80%]"},ee={class:"w-full dash-content"},te={class:"py-5 lg:px-[25px] px-4"},oe={class:"flex flex-col lg:flex-row justify-between lg:items-center"},re={class:""},ae=e("span",{class:"text-gray-600 text-base"},"Liste des catégories de déballage ",-1),se=G('<div id="modal" class="absolute invisible w-full h-full top-0 left-0 bg-black bg-opacity-40 flex justify-center items-center"><div class="mb-4 flex gap-x-4 mt-7"></div><div class="bg-white rounded-lg shadow-sm w-[90%] lg:w-[40%] h-fit lg:h-[40%] px-4 py-4 lg:py-6 lg:px-6"><button id="cancelButtons" class="text-black font-bold font-bold" type="button">X</button><div class="flex justify-between"><h1 class="w-full h-full text-[24px] font-medium text-center">Do you really want to cancel this order?</h1></div><div class="mb-4 flex gap-x-4 mt-7"><button id="cancelButton" class="w-full rounded-md py-3 bg-red-600 text-black font-medium" type="button">NO</button><input class="w-full rounded-md py-3 bg-black text-white" type="submit" value="YES"></div></div></div>',1),ne={class:"container mx-auto p-6 font-mono"},le={class:"w-full"},ie={class:"bg-white p-4 rounded shadow"},de={class:"table-container"},ce={class:"w-full"},pe=e("thead",null,[e("tr",{class:"text-md font-semibold tracking-wide text-left text-white bg-red-600 uppercase border-b border-gray-600"},[e("th",{class:"px-4 py-3 text-center"},"Nom "),e("th",{class:"px-4 py-3 text-center"},"Image"),e("th",{class:"px-4 py-3 text-center"},"Description"),e("th",{class:"px-4 py-3 text-center"},"Action")])],-1),ue={class:"py-3 border"},ge={class:"px-3 py-4font-semibold text-black text-center"},me={class:"px-4 py-3 border"},be={class:"w-12 h-12 mr-3 md:block"},xe=["src"],he={class:"px-4 py-3 text-ms font-semibold border text-center"},_e={class:"px-4 py-3 text-ms font-semibold border text-center"},fe=["onClick"],ye=["onClick"],ve={key:1,class:"py-3 border"},we=e("td",{class:"px-3 py-4font-semibold text-black text-center"},"Iphone",-1),ke=e("td",{class:"px-4 py-3 border"},[e("div",{class:"w-12 h-12 mr-3 md:block"},[e("img",{class:"object-cover w-full h-full",src:"https://images.pexels.com/photos/5212324/pexels-photo-5212324.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260",alt:"",loading:"lazy"})])],-1),Ce=e("td",{class:"px-4 py-3 text-ms font-semibold border text-center"},"22",-1),Ne=e("td",{class:"px-4 py-3 text-ms font-semibold border text-center"},[e("a",{href:"#",class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier "),e("a",{href:"#",class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"delete ")],-1),Ue=[we,ke,Ce,Ne],De=e("div",{class:"flex justify-end gap-x-3 mt-7 p-fixed mb-6 z-10"},[e("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"previousPage()"},"Previous"),e("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"nextPage()"},"Next")],-1),Se={class:"max-w-screen-lg mx-auto"},Le={class:"bg-white p-4 rounded shadow"},Ve={key:0,class:"text-lg font-semibold mb-4"},Ee={key:1,class:"text-lg font-semibold mb-4"},Te={class:"mb-4"},Fe=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productName"},"Quel est le nom de la catégorie ?",-1),Ie={key:0,class:"text-red-500 m-1"},je={class:"mb-4"},Me=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productImage"},"Télécharger l'image de la nouvelle catégorie",-1),Be=["src"],Pe={key:1,class:"text-red-500 m-1"},Ae={class:"mb-4"},Ge=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"AttributeDescribtion"},"Quels sont les attributs de la catégorie ?",-1),Qe={key:0,class:"text-red-500 m-1"},Re={class:"mb-3"},qe=e("label",{class:"small mb-1",for:"parent_id"},[e("b",null,"Parent de la categorie")],-1),ze=e("option",{value:""},"None",-1),Ye=["value"],Xe={key:0,class:"text-red-500 m-1"},Je=e("div",null,[e("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Soumettre")],-1),Ke={class:"mb-4"},Oe=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productName"},"Quel est le nom de la catégorie ?",-1),He={key:0,class:"text-red-500 m-1"},We={class:"mb-4"},Ze=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productImage"},"Télécharger l'image de la catégorie",-1),$e=["src"],et={key:1,class:"text-red-500 m-1"},tt={class:"mb-4"},ot=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"AttributeDescribtion"},"Quels sont les attributs de la catégorie ?",-1),rt={key:0,class:"text-red-500 m-1"},at={class:"mb-3"},st=e("label",{class:"small mb-1",for:"parent_id"},[e("b",null,"Parent de la categorie")],-1),nt=e("option",{value:""},"None",-1),lt=["value"],it={key:0,class:"text-red-500 m-1"},dt=e("div",null,[e("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Modifier")],-1);function ct(i,a,_,t,m,b){const c=v("Navbar"),f=v("TopNavbar"),u=v("Loader"),x=v("GreetingUser");return s(),n("main",Z,[w(c),e("section",$,[e("div",ee,[w(f),w(u),e("div",te,[e("div",oe,[e("div",re,[w(x,null,{greeting:A(()=>[Q("Bonne journée, "+l(t.authUser.firstName)+" "+l(t.authUser.lastName),1)]),_:1}),ae])])])]),se,e("section",ne,[e("div",le,[e("div",ie,[e("div",de,[e("table",ce,[pe,e("tbody",null,[t.categories.length>0?(s(!0),n(U,{key:0},D(t.categories,o=>(s(),n("tr",ue,[e("td",ge,l(o.name),1),e("td",me,[e("div",be,[e("img",{class:"object-cover w-full h-full",src:t.path+o.image,alt:"",loading:"lazy"},null,8,xe)])]),e("td",he,l(o.description),1),e("td",_e,[e("a",{href:"#",onClick:N=>t.editCategory(o),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier ",8,fe),e("a",{href:"#",onClick:N=>t.confirmDelete(o.id),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"Supprimer ",8,ye)])]))),256)):(s(),n("tr",ve,Ue))])]),De])])])]),e("div",Se,[e("div",Le,[t.editingCategory?(s(),n("h2",Ee,"Mettre à jour la categorie")):(s(),n("h2",Ve,"Créer une nouvelle Categorie")),t.editingCategory?(s(),n("form",{key:3,onSubmit:a[9]||(a[9]=S((...o)=>t.updateCategory&&t.updateCategory(...o),["prevent"]))},[e("div",Ke,[Oe,h(e("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>t.editingCategory.name=o),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productName",type:"text",placeholder:"Enter your product name"},null,512),[[k,t.editingCategory.name]]),t.errors.name?(s(),n("span",He,l(t.errors.name[0]),1)):p("",!0)]),e("div",We,[Ze,e("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productImage",type:"file",placeholder:"Enter your product quantity",onChange:a[6]||(a[6]=(...o)=>t.onFileChange&&t.onFileChange(...o))},null,32),t.imageUrl?(s(),n("img",{key:0,src:t.imageUrl,alt:"Selected Image",class:"mt-2",width:"50",height:"50"},null,8,$e)):p("",!0),t.errors.image?(s(),n("span",et,l(t.errors.image[0]),1)):p("",!0)]),e("div",tt,[ot,h(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=o=>t.editingCategory.description=o),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"AttributeDescribtion",type:"text",placeholder:"Enter a description"},null,512),[[k,t.editingCategory.description]]),t.errors.description?(s(),n("span",rt,l(t.errors.description[0]),1)):p("",!0)]),e("div",at,[st,h(e("select",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline","onUpdate:modelValue":a[8]||(a[8]=o=>t.editingCategory.parent_id=o),id:"parent_id"},[nt,(s(!0),n(U,null,D(t.categories,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name),9,lt))),128))],512),[[L,t.editingCategory.parent_id]]),t.errors.parent_id?(s(),n("span",it,l(t.errors.parent_id[0]),1)):p("",!0)]),dt],32)):(s(),n("form",{key:2,onSubmit:a[4]||(a[4]=S((...o)=>t.createNewCategory&&t.createNewCategory(...o),["prevent"]))},[e("div",Te,[Fe,h(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>t.name=o),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productName",type:"text",placeholder:"Enter your product name"},null,512),[[k,t.name]]),t.errors.name?(s(),n("span",Ie,l(t.errors.name[0]),1)):p("",!0)]),e("div",je,[Me,e("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productImage",type:"file",placeholder:"Enter your product quantity",onChange:a[1]||(a[1]=(...o)=>t.onFileChange&&t.onFileChange(...o))},null,32),t.imageUrl?(s(),n("img",{key:0,src:t.imageUrl,alt:"Selected Image",class:"mt-2",width:"50",height:"50"},null,8,Be)):p("",!0),t.errors.image?(s(),n("span",Pe,l(t.errors.image[0]),1)):p("",!0)]),e("div",Ae,[Ge,h(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=o=>t.description=o),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"AttributeDescribtion",type:"text",placeholder:"Enter a description"},null,512),[[k,t.description]]),t.errors.description?(s(),n("span",Qe,l(t.errors.description[0]),1)):p("",!0)]),e("div",Re,[qe,h(e("select",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline","onUpdate:modelValue":a[3]||(a[3]=o=>t.parent_id=o),id:"parent_id"},[ze,(s(!0),n(U,null,D(t.categories,o=>(s(),n("option",{key:o.id,value:o.id},l(o.name),9,Ye))),128))],512),[[L,t.parent_id]]),t.errors.parent_id?(s(),n("span",Xe,l(t.errors.parent_id[0]),1)):p("",!0)]),Je],32))])])])])}const vt=z(W,[["render",ct]]);export{vt as default};
