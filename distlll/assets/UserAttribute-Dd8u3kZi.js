import{c as L,f as p,w as S,o as C,E as m,G as n,I as i,q as g,J as t,K as U,F as T,R as B,P as v,M as w,N as k,Q as u,T as N,S as E,L as M}from"./@vue-CRjAt1GK.js";import{u as V}from"./vuex-j54FugZL.js";import{u as j}from"./vue-router-BY3fkmSn.js";import{_ as D,d as P,L as G,T as Y,i as h,t as F}from"./index-BCmC1QR8.js";import{S as I}from"./sweetalert2-BCK3Sqif.js";import{G as R}from"./GreetingUser-CGvTw3eS.js";import"./vue3-toastify-CEi4-HDi.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const q={components:{Navbar:P,Loader:G,TopNavbar:Y,GreetingUser:R},setup(){j();const a=V();a.getters["getImagePaths/getPath"];const r=L(()=>a.getters["auth/user"]),b=p(""),e=p(""),l=p({}),c=p(null);S(r,(o,d)=>{console.log(o),console.log(d)});const f=(o,d)=>o.length<=d?o:o.substring(0,d)+"...",x=async()=>{l.value={},a.dispatch("loader/setLoading",!0);try{console.log(r.value.id),await a.dispatch("attributes/createAttribute",{name:b.value,user_id:r.value.id}),b.value="";const o=await h.get("/api/user-attributes");e.value=o.data.attributes}catch(o){l.value=o}finally{a.dispatch("loader/setLoading",!1),console.log("Setting loader to false")}},_=o=>{I.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed){a.dispatch("attributes/deleteAttribute",o);const A=await h.get("/api/user-attributes");e.value=A.data.attributes}})},y=o=>{console.log(o),c.value={...o}},s=async()=>{l.value={},a.dispatch("loader/setLoading",!0);try{await a.dispatch("attributes/updateAttribute",{...c.value});const o=await h.get("/api/user-attributes");e.value=o.data.attributes,c.value=null,F.success()}catch(o){l.value=o}finally{a.dispatch("loader/setLoading",!1)}};return C(async()=>{a.dispatch("loader/setLoading",!0);try{await a.dispatch("auth/fetchUser");const o=await h.get("/api/user-attributes");e.value=o.data.attributes,console.log(e.value)}catch(o){console.log(o)}finally{a.dispatch("loader/setLoading",!1)}}),{truncateText:f,authUser:r,createNewAttribute:x,name:b,errors:l,attributes:e,editAttribute:y,updateAttribute:s,editingAttribute:c,confirmDelete:_}}},z={class:"flex relative"},J={class:"lg:flex-row w-full lg:w-[80%]"},K={class:"w-full dash-content"},O={class:"py-5 lg:px-[25px] px-4"},Q={class:"flex flex-col lg:flex-row justify-between lg:items-center"},X={class:""},H=t("span",{class:"text-gray-600 text-base"},"Deballage, Liste des Attributs ",-1),W=E('<div id="modal" class="absolute invisible w-full h-full top-0 left-0 bg-black bg-opacity-40 flex justify-center items-center"><div class="mb-4 flex gap-x-4 mt-7"></div><div class="bg-white rounded-lg shadow-sm w-[90%] lg:w-[40%] h-fit lg:h-[40%] px-4 py-4 lg:py-6 lg:px-6"><button id="cancelButtons" class="text-black font-bold font-bold" type="button">X</button><div class="flex justify-between"><h1 class="w-full h-full text-[24px] font-medium text-center">Do you really want to cancel this order?</h1></div><div class="mb-4 flex gap-x-4 mt-7"><button id="cancelButton" class="w-full rounded-md py-3 bg-red-600 text-black font-medium" type="button">NO</button><input class="w-full rounded-md py-3 bg-black text-white" type="submit" value="YES"></div></div></div>',1),Z={class:"container mx-auto p-6 font-mono"},$={class:"w-full"},tt={class:"bg-white p-4 rounded shadow"},et={class:"table-container"},ot={class:"w-full"},st=t("thead",null,[t("tr",{class:"text-md font-semibold tracking-wide text-left text-white bg-red-600 uppercase border-b border-gray-600"},[t("th",{class:"px-4 py-3"},"Nom "),t("th",{class:"px-4 py-3"},"Action ")])],-1),at={class:"px-3 py-4font-semibold text-black"},rt={class:"px-4 py-3 text-sm border"},nt=["onClick"],it=["onClick"],lt={key:1,class:"py-3 border"},dt=t("td",{class:"px-3 py-4font-semibold text-black"}," Exemple",-1),ct=t("td",{class:"px-4 py-3 text-sm border"},[t("a",{id:"",href:"#",class:"inline-block px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier "),t("a",{id:"",href:"#",class:"inline-block px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"delete ")],-1),ut=[dt,ct],bt=t("div",{class:"flex justify-end gap-x-3 mt-7 p-fixed mb-6 z-10"},[t("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"previousPage()"},"Previous"),t("button",{class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onclick:"nextPage()"},"Next")],-1),pt={class:"max-w-screen-lg mx-auto"},mt={class:"bg-white p-4 rounded shadow"},gt={key:0,class:"text-lg font-semibold mb-4"},ht={key:1,class:"text-lg font-semibold mb-4"},ft={class:"mb-4"},xt=t("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"attributeName"}," Nom",-1),_t={key:0,class:"text-danger m-1"},yt=t("div",null,[t("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Soumettre")],-1),vt={class:"mb-4"},wt=t("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"updateAttributeName"}," Nom",-1),kt={key:0,class:"text-red-500 m-1"},Nt=t("div",null,[t("button",{type:"submit",class:"bg-black hover:bg-red-600 text-white font-bold py-2 px-4 rounded"},"Modifier")],-1);function At(a,r,b,e,l,c){const f=m("Navbar"),x=m("TopNavbar"),_=m("Loader"),y=m("GreetingUser");return n(),i("main",z,[g(f),t("section",J,[t("div",K,[g(x),g(_),t("div",O,[t("div",Q,[t("div",X,[g(y,null,{greeting:U(()=>[M("Bonne journée, "+u(e.authUser.firstName)+" "+u(e.authUser.lastName),1)]),_:1}),H])]),W,t("section",Z,[t("div",$,[t("div",tt,[t("div",et,[t("table",ot,[st,t("tbody",null,[e.attributes.length>0?(n(!0),i(T,{key:0},B(e.attributes,s=>(n(),i("tr",{class:"py-3 border",key:s.id},[t("td",at,u(s.name),1),t("td",rt,[t("a",{href:"#",onClick:o=>e.editAttribute(s),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold text-white",style:{"background-color":"green","border-color":"green"}},"Modifier ",8,nt),t("a",{href:"#",onClick:o=>e.confirmDelete(s.id),class:"inline-block mr-1 px-1 border-2 rounded-lg font-bold border-red-600 bg-red-600 text-white"},"Supprimer ",8,it)])]))),128)):(n(),i("tr",lt,ut))])]),bt])])])]),t("div",pt,[t("div",mt,[e.editingAttribute?(n(),i("h2",ht,"Mettre à jour l'attribut")):(n(),i("h2",gt,"Créer un nouvel attribut ")),e.editingAttribute?(n(),i("form",{key:3,onSubmit:r[3]||(r[3]=v((...s)=>e.updateAttribute&&e.updateAttribute(...s),["prevent"]))},[t("div",vt,[wt,w(t("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"updateAttributeName",type:"text",placeholder:"Enter the attribute name","onUpdate:modelValue":r[2]||(r[2]=s=>e.editingAttribute.name=s)},null,512),[[k,e.editingAttribute.name]]),e.errors.name?(n(),i("span",kt,u(e.errors.name[0]),1)):N("",!0)]),Nt],32)):(n(),i("form",{key:2,onSubmit:r[1]||(r[1]=v((...s)=>e.createNewAttribute&&e.createNewAttribute(...s),["prevent"]))},[t("div",ft,[xt,w(t("input",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"attributeName",type:"text",placeholder:"Enter the attribute name","onUpdate:modelValue":r[0]||(r[0]=s=>e.name=s)},null,512),[[k,e.name]]),e.errors.name?(n(),i("span",_t,u(e.errors.name[0]),1)):N("",!0)]),yt],32))])])])])])])}const Dt=D(q,[["render",At]]);export{Dt as default};
