import{c as S,f as l,o as T,E as w,G as i,I as d,q as N,J as e,K as F,L as P,Q as r,P as z,M as m,N as f,T as p,X as G,S as D}from"./@vue-CRjAt1GK.js";import{u as j}from"./vuex-j54FugZL.js";import{u as B}from"./vue-router-BY3fkmSn.js";import{_ as I,d as R,L as A,T as q,t as H}from"./index-BCmC1QR8.js";import"./sweetalert2-BCK3Sqif.js";import{G as J}from"./GreetingUser-CGvTw3eS.js";import"./vue3-toastify-CEi4-HDi.js";import"./axios-1jJeUhjj.js";import"./vee-validate-BE89hST2.js";import"./@vee-validate-BMb1-Yqj.js";const K="/images/svgs/icon_user.svg",Q={components:{Navbar:R,Loader:A,TopNavbar:q,GreetingUser:J},setup(){B();const n=j(),s=n.getters["getImagePaths/getPath"],c=S(()=>n.getters["auth/user"]),o=l(""),h=l(""),b=l(""),y=l(""),x=l(""),g=l(""),u=l(""),t=l(""),v=l(""),U=l({}),V=()=>{o.value=c.value.firstName,h.value=c.value.lastName,x.value=c.value.email,g.value=c.value.phone,t.value=c.value.gender,v.value=s+c.value.profile},E=(a,_)=>a.length<=_?a:a.substring(0,_)+"...",L=async()=>{U.value={},n.dispatch("loader/setLoading",!0);try{const a=new FormData;a.append("id",c.value.id),a.append("firstName",o.value),a.append("lastName",h.value),a.append("email",x.value),a.append("gender",t.value),a.append("phone",g.value),b.value&&(a.append("password",b.value),a.append("password_confirmation",y.value)),u.value&&a.append("profile",u.value),await n.dispatch("users/updateUser",a),H.success(),v.value="",await n.dispatch("auth/fetchUser")}catch(a){U.value=a}finally{n.dispatch("loader/setLoading",!1)}},M=a=>{const _=a.target.files;if(_.length>0){u.value=_[0];const k=new FileReader;k.onload=C=>{v.value=C.target.result},k.readAsDataURL(u.value)}};return T(async()=>{n.dispatch("loader/setLoading",!0);try{await n.dispatch("auth/fetchUser"),V()}catch(a){console.log(a)}finally{n.dispatch("loader/setLoading",!1)}}),{truncateText:E,authUser:c,firstName:o,lastName:h,password:b,password_confirmation:y,email:x,phone:g,gender:t,imageUrlProfile:v,onFileChangeProfile:M,errors:U,updateUser:L}}},W={class:"flex"},X={class:"flex flex-col w-ful lg:px-0 lg:w-[80%]"},O={class:"w-full dash-content"},Y={class:"py-5 px-6 lg:px-[25px]"},Z={class:"flex justify-between items-center"},$={class:""},ee=e("span",{class:"text-gray-600 text-base"},"Gérez votre compte d'acheteur personnalisé ici",-1),oe={class:"pt-6 lg:pt-16 w-full px-5"},te={class:"flex w-full flex-col lg:flex-row gap-8 items-start"},se=e("div",{class:"w-[80px] lg:w-[220px] h-[80px] lg:h-[180px] rounded-full flex justify-center items-center bg-gray-200"},[e("img",{class:"w-[40px] lg:w-[80px]",src:K,alt:"avatar icon for a user"})],-1),ae={class:"w-full"},re={class:"font-bold"},ne=e("span",{class:"ml-3 inline-block p-1 rounded-sm text-[10px] font-medium bg-red-100 text-red-800"},"Premium user",-1),le={class:"space-y-2 mt-3"},ie={class:"flex items-center gap-2 text-gray-700"},de=e("i",{class:"fa fa-phone","aria-hidden":"true"},null,-1),ce={class:"font-light"},pe={class:"flex items-center gap-2 text-gray-700"},me=e("i",{class:"fa fa-envelope","aria-hidden":"true"},null,-1),ue={class:"font-light"},fe=D('<div class="flex flex-col w-full lg:flex-row gap-6 mt-6 text-center lg:w-[50%]"><div class="p-2 w-full border-[1px] rounded"><span class="font-light text-gray-600">Solde du portefeuille</span><span class="mt-2 block text-[16px] font-bold text-gray-800">0 FCFA</span></div><div class="p-2 w-full border-[1px] rounded"><span class="font-light text-gray-600">Commandes</span><span class="mt-2 block text-[16px] font-bold text-gray-800">0</span></div><div class="p-2 w-full border-[1px] rounded"><span class="block font-light text-gray-600">Livré</span><span class="text-[16px] font-bold text-gray-800 mt-2">0</span></div></div>',1),xe={class:"mt-10"},ge=e("div",{class:"flex justify-between items-center"},[e("h3",{class:"text-[20px] font-bold text-gray-800"},"Détails du profil")],-1),_e={class:"max-w-screen-lg mx-auto"},he={class:"bg-white p-4 rounded shadow"},be=e("h2",{class:"text-lg font-semibold mb-4"},"Editer le profil",-1),ye={class:"mb-4"},ve=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productName"},"Modifiez votre nom",-1),we={key:0,class:"text-red-500 m-1"},Ne={class:"mb-4"},Ue=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"productPrenom"},"Modifiez votre prenom",-1),ke={key:0,class:"text-red-500 m-1"},Pe={class:"mb-4"},Ve=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"phone"},"Modifiez votre numéro de téléphone",-1),Ee={key:0,class:"text-red-500 m-1"},Le={class:"mb-4"},Me=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"email"},"Modifiez votre email",-1),Ce={key:0,class:"text-red-500 m-1"},Se={class:"mb-4"},Te=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"password"},"Modifiez votre mot de passe",-1),Fe={key:0,class:"text-red-500 m-1"},ze={class:"mb-4"},Ge=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"password_confirmation"},"mot de passe de confirmation",-1),De={key:0,class:"text-red-500 m-1"},je={class:"mb-4"},Be=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"gender"},"Genre",-1),Ie=e("option",{value:"M"},"Homme",-1),Re=e("option",{value:"W"},"Femme",-1),Ae=[Ie,Re],qe={key:0,class:"text-red-500 m-1"},He={class:"mb-4"},Je=e("label",{class:"block text-gray-600 text-[16px] font-medium mb-2",for:"imageUrlProfile"},"Téléchargez une photo de profil.",-1),Ke=["src"],Qe={key:1,class:"text-red-500 m-1"},We=e("div",null,[e("button",{type:"submit",class:"bg-red-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Sauvegarder les modifications")],-1);function Xe(n,s,c,o,h,b){const y=w("Navbar"),x=w("TopNavbar"),g=w("Loader"),u=w("GreetingUser");return i(),d("main",W,[N(y),e("section",X,[e("div",O,[N(x),N(g),e("div",Y,[e("div",Z,[e("div",$,[N(u,null,{greeting:F(()=>[P("Bonne journée, "+r(o.authUser.firstName)+" "+r(o.authUser.lastName),1)]),_:1}),ee])]),e("div",oe,[e("div",te,[se,e("div",ae,[e("p",re,[P(r(o.authUser.firstName)+" "+r(o.authUser.lastName)+" ",1),ne]),e("ul",le,[e("li",ie,[de,e("span",ce,r(o.authUser.phone),1)]),e("li",pe,[me,e("span",ue,r(o.authUser.email),1)])]),fe])]),e("div",xe,[ge,e("div",_e,[e("div",he,[be,e("form",{onSubmit:s[8]||(s[8]=z((...t)=>o.updateUser&&o.updateUser(...t),["prevent"])),enctype:"multipart/form-data"},[e("div",ye,[ve,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.firstName=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productName",type:"text",placeholder:"Enter your  first name"},null,512),[[f,o.firstName]]),o.errors.firstName?(i(),d("span",we,r(o.errors.firstName[0]),1)):p("",!0)]),e("div",Ne,[Ue,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.lastName=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"productPrenom",type:"text",placeholder:"Enter your  last name"},null,512),[[f,o.lastName]]),o.errors.lastName?(i(),d("span",ke,r(o.errors.lastName[0]),1)):p("",!0)]),e("div",Pe,[Ve,m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.phone=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"phone",type:"number",placeholder:"Enter your number"},null,512),[[f,o.phone]]),o.errors.phone?(i(),d("span",Ee,r(o.errors.phone[0]),1)):p("",!0)]),e("div",Le,[Me,m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.email=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"email",type:"email",placeholder:"Enter your email"},null,512),[[f,o.email]]),o.errors.email?(i(),d("span",Ce,r(o.errors.email[0]),1)):p("",!0)]),e("div",Se,[Te,m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.password=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"password",type:"password",placeholder:"Enter your email"},null,512),[[f,o.password]]),o.errors.password?(i(),d("span",Fe,r(o.errors.password[0]),1)):p("",!0)]),e("div",ze,[Ge,m(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.password_confirmation=t),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"password_confirmation",type:"password",placeholder:"Enter your email"},null,512),[[f,o.password_confirmation]]),o.errors.password_confirmation?(i(),d("span",De,r(o.errors.password_confirmation[0]),1)):p("",!0)]),e("div",je,[Be,m(e("select",{class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline","onUpdate:modelValue":s[6]||(s[6]=t=>o.gender=t),id:"gender"},Ae,512),[[G,o.gender]]),o.errors.gender?(i(),d("span",qe,r(o.errors.gender[0]),1)):p("",!0)]),e("div",He,[Je,e("input",{onChange:s[7]||(s[7]=(...t)=>o.onFileChangeProfile&&o.onFileChangeProfile(...t)),class:"border-[1px] border-gray-600 appearance-none rounded-[8px] w-full py-3 px-3 text-gray-500 leading-tight focus:outline-none focus:border-[1px] border-gray-600-outline",id:"imageUrlProfile",type:"file",placeholder:"Enter your profile image"},null,32),o.imageUrlProfile?(i(),d("img",{key:0,src:o.imageUrlProfile,alt:"Selected Image",class:"mt-2",width:"50",height:"50"},null,8,Ke)):p("",!0),o.errors.profile?(i(),d("span",Qe,r(o.errors.profile[0]),1)):p("",!0)]),We],32)])])])])])])])])}const no=I(Q,[["render",Xe]]);export{no as default};
